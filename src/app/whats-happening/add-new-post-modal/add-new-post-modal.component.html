<div class="modal-header">
  <h4 class="modal-title">Add New Post</h4>

  <button
    type="button"
    class="btn-close"
    aria-label="Close"
    (click)="activeModal.dismiss('Cross click')"
  ></button>
</div>

<form #f="ngForm" (ngSubmit)="onCreatePost(f)">
  <div class="modal-body">
    <div class="add-post-container">
      <h3>Add a post</h3>

      <!-- message input -->
      <label>Message</label>
      <textarea
        class="form-control"
        id="message"
        rows="3"
        ngModel
        name="message"
        required
      ></textarea>

      <!-- File input -->
      <span class="file-input-container">
        <input type="file" (change)="uploadFile($event)" #fileInput />

        <span
          *ngIf="iconURLs.length > 0"
          class="reset-files-button"
          (click)="clearFiles()"
          >&#10006;</span
        >
      </span>

      <div
        class="upload-progress"
        *ngIf="percentageChanges$ | async as percentage"
      >
        <app-loading-spinner></app-loading-spinner>
        <span>{{ percentage / 100 | percent }}</span>
      </div>

      <div class="files-to-upload">
        <img *ngFor="let url of iconURLs" [src]="url" class="uploaded-img" />
      </div>
    </div>

    <span
      ><ngb-alert
        class="success-alert"
        [dismissible]="true"
        [animation]="true"
        type="success"
        *ngIf="displaySuccessMsg"
      >
        Successfully added post! ðŸ¥³
      </ngb-alert></span
    >

    <span
      ><ngb-alert
        class="danger-alert"
        [dismissible]="true"
        [animation]="true"
        type="danger"
        *ngIf="displayErrorMsg"
      >
        Unable to add post. Please reach out to Jaden for help! ðŸ˜­
      </ngb-alert></span
    >
  </div>
  <div class="modal-footer">
    <!-- Submit button -->
    <button [disabled]="!f.valid" type="submit" class="btn btn-primary">
      Submit
    </button>
  </div>
</form>
